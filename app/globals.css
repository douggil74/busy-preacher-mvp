@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   ROOT & DEFAULTS
   ======================================== */
:root {
  color-scheme: dark;
  --bc-font-scale: 1;
}

html, 
body, 
#__next { 
  height: 100%; 
}

html { 
  font-size: calc(1rem * var(--bc-font-scale, 1)); 
}

body {
  @apply bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100;
  font-family: system-ui, sans-serif;
  transition: color 0.3s;
}

/* Better text wrapping */
h1, h2, h3 { 
  text-wrap: balance; 
  hyphens: auto; 
}

/* ========================================
   THEME SWITCHING (Dark/Light)
   ======================================== */
html.dark { 
  color-scheme: dark; 
}

html.light {
  color-scheme: light;
  filter: invert(1) hue-rotate(180deg);
}

/* Protect media from inversion in light mode */
html.light img,
html.light video,
html.light canvas,
html.light svg,
html.light picture,
html.light [data-keep-colors],
html.light .no-invert,
html.light [data-bg] {
  filter: invert(1) hue-rotate(180deg);
}

/* ========================================
   ANIMATIONS
   ======================================== */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-border {
  0%, 100% {
    border-color: rgba(248, 113, 113, 0.5);
  }
  50% {
    border-color: rgba(248, 113, 113, 1);
  }
}

@keyframes bp-indeterminate {
  0% { 
    left: -35%; 
    right: 100%; 
  }
  60% { 
    left: 100%; 
    right: -90%; 
  }
  100% { 
    left: 100%; 
    right: -90%; 
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 0 40px rgba(255, 217, 102, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  50% {
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 0 60px rgba(255, 217, 102, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out forwards;
}

.animate-pulse-border {
  animation: pulse-border 2s ease-in-out infinite;
}

/* ========================================
   FORM ELEMENTS
   ======================================== */
.input {
  @apply w-full rounded-2xl border-2 border-[#FFD966] bg-transparent px-4 py-3 text-base outline-none text-white placeholder:text-white/40 focus:ring-2 focus:ring-[#FFD966]/50 focus:border-[#FFD966] transition;
}

/* ========================================
   BUTTONS
   ======================================== */
.btn {
  @apply inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/10 px-5 py-3 font-medium backdrop-blur hover:bg-white/15 active:scale-[0.99] transition;
}

/* ========================================
   CARDS WITH GLOW EFFECT
   ======================================== */
.card {
  @apply w-full max-w-3xl mx-auto rounded-2xl border border-white/10 bg-white/5 p-6 shadow-soft backdrop-blur-xl;
  position: relative;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    0 0 50px rgba(255, 217, 102, 0.2),
    0 0 80px rgba(255, 165, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.card::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(135deg, rgba(255, 217, 102, 0.3), rgba(255, 165, 0, 0.1), transparent);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.card:hover {
  box-shadow: 
    0 12px 40px rgba(0, 0, 0, 0.4),
    0 0 70px rgba(255, 217, 102, 0.3),
    0 0 100px rgba(255, 165, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 217, 102, 0.25);
}

.card:hover::before {
  opacity: 1;
}

.deep-study-card {
  @apply w-full max-w-5xl mx-auto rounded-2xl border border-white/10 bg-white/5 p-6 shadow-soft backdrop-blur-xl;
  position: relative;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    0 0 50px rgba(255, 217, 102, 0.2),
    0 0 80px rgba(255, 165, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.deep-study-card::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(135deg, rgba(255, 217, 102, 0.3), rgba(255, 165, 0, 0.1), transparent);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.deep-study-card:hover {
  box-shadow: 
    0 12px 40px rgba(0, 0, 0, 0.4),
    0 0 70px rgba(255, 217, 102, 0.3),
    0 0 100px rgba(255, 165, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 217, 102, 0.25);
}

.deep-study-card:hover::before {
  opacity: 1;
}

/* ========================================
   BADGES & STATUS
   ======================================== */
.badge {
  @apply inline-flex items-center rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs uppercase tracking-wide text-white/70;
}

.statusbar {
  position: relative;
  width: 100%;
  height: 6px;
  border-radius: 9999px;
  background: rgba(255, 255, 255, 0.08);
  overflow: hidden;
}

.statusbar-fill {
  position: absolute;
  height: 100%;
  border-radius: 9999px;
  background: rgba(255, 255, 255, 0.45);
  animation: bp-indeterminate 1.4s ease-in-out infinite;
}

/* ========================================
   SCROLLBAR
   ======================================== */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #0f172a;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #FFD966 0%, #FFA500 100%);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #FFD966;
}

/* ========================================
   UTILITIES
   ======================================== */

/* Container - centers content */
.container {
  width: 100%;
  max-width: 1400px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (min-width: 768px) {
  .container {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

@layer utilities {
  /* Safe area padding for notched devices */
  .px-safe {
    padding-left: max(0.75rem, env(safe-area-inset-left));
    padding-right: max(0.75rem, env(safe-area-inset-right));
  }
}