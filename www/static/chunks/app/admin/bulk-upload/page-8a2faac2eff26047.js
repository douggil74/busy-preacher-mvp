(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7747],{6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},20726:(e,s,t)=>{Promise.resolve().then(t.bind(t,96977))},21786:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},27738:(e,s,t)=>{"use strict";async function a(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={...s.headers,...function(){let e="b6d6eb3a47a4f760d86ac26ef70d73d49dbf552f3270e8356f18d8db52874da2";return e||console.error("[Admin API] NEXT_PUBLIC_ADMIN_API_SECRET not configured"),{Authorization:"Bearer ".concat(e)}}()};return fetch(e,{...s,headers:t})}async function r(e,s){return a(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async function l(e,s){return a(e,{method:"POST",body:s})}async function n(e){return a(e,{method:"GET"})}t.d(s,{Cw:()=>n,KQ:()=>l,eM:()=>r})},35299:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},35626:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},96977:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(95155),r=t(12115),l=t(35626),n=t(21786),i=t(35299),d=t(71847);let c=(0,d.A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var o=t(42529);let m=(0,d.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=t(6132),h=t(20063),u=t(88371),p=t(27738);function b(){let e=(0,h.useRouter)(),[s,t]=(0,r.useState)([]),[d,b]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),v=(0,r.useCallback)(e=>{e.preventDefault(),b(!0)},[]),y=(0,r.useCallback)(e=>{e.preventDefault(),b(!1)},[]),k=(0,r.useCallback)(e=>{e.preventDefault(),b(!1),w(Array.from(e.dataTransfer.files))},[]),w=e=>{let s=e.filter(e=>{let s=e.name.toLowerCase();return s.endsWith(".txt")||s.endsWith(".docx")}).map(e=>({file:e,status:"pending"}));t(e=>[...e,...s]),N(null)},A=async()=>{if(0===s.length)return;g(!0);let e=0,a=0,r=0;for(let l=0;l<s.length;l++){let n=s[l];t(e=>e.map((e,s)=>s===l?{...e,status:"processing"}:e));try{let s=new FormData;s.append("file",n.file);let i=await (0,p.KQ)("/api/sermons/bulk-upload",s),d=await i.json();i.ok&&d.success?(t(e=>e.map((e,s)=>s===l?{...e,status:"success",message:"Uploaded: ".concat(d.title)}:e)),e++):d.skipped?(t(e=>e.map((e,s)=>s===l?{...e,status:"error",message:"Skipped: ".concat(d.reason)}:e)),a++):(t(e=>e.map((e,s)=>s===l?{...e,status:"error",message:"Error: ".concat(d.error||"Upload failed")}:e)),r++)}catch(e){t(s=>s.map((s,t)=>t===l?{...s,status:"error",message:"Error: ".concat(e instanceof Error?e.message:"Unknown error")}:s)),r++}l<s.length-1&&await new Promise(e=>setTimeout(e,500))}g(!1),N({uploaded:e,skipped:a,errors:r})};return(0,a.jsx)(u.A,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin/sermons"),className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",children:(0,a.jsx)(l.A,{className:"w-5 h-5 text-slate-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,a.jsx)(n.A,{className:"w-8 h-8 text-amber-400"}),"Bulk Upload Sermons"]}),(0,a.jsx)("p",{className:"text-slate-300 mt-1",children:"Upload multiple sermon files at once"})]})]}),j&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:[(0,a.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Upload Complete"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:j.uploaded}),(0,a.jsx)("div",{className:"text-sm text-slate-300",children:"Uploaded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:j.skipped}),(0,a.jsx)("div",{className:"text-sm text-slate-300",children:"Skipped"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-400",children:j.errors}),(0,a.jsx)("div",{className:"text-sm text-slate-300",children:"Errors"})]})]})]}),(0,a.jsxs)("div",{onDragOver:v,onDragLeave:y,onDrop:k,className:"mb-6 border-2 border-dashed rounded-xl p-12 text-center transition-all ".concat(d?"border-amber-500 bg-amber-500/10":"border-slate-700 bg-slate-800/30"),children:[(0,a.jsx)(n.A,{className:"w-16 h-16 mx-auto mb-4 ".concat(d?"text-amber-400":"text-slate-400")}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:d?"Drop files here":"Drag & drop sermon files"}),(0,a.jsx)("p",{className:"text-slate-300 mb-4",children:"Supports .txt and .docx files (modern Word format)"}),(0,a.jsxs)("label",{className:"inline-block px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium cursor-pointer transition-colors",children:[(0,a.jsx)("input",{type:"file",multiple:!0,accept:".txt,.docx",onChange:e=>{e.target.files&&w(Array.from(e.target.files))},className:"hidden"}),"Or click to browse"]})]}),s.length>0&&(0,a.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Files (",s.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{t([]),N(null)},disabled:f,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All"}),(0,a.jsx)("button",{onClick:A,disabled:f||s.every(e=>"success"===e.status),className:"px-6 py-2 bg-gradient-to-br from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),"Upload All"]})})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:s.map((e,s)=>{var r;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-900 rounded-lg border border-slate-700",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:["pending"===e.status&&(0,a.jsx)(c,{className:"w-5 h-5 text-slate-400"}),"processing"===e.status&&(0,a.jsx)(i.A,{className:"w-5 h-5 text-amber-400 animate-spin"}),"success"===e.status&&(0,a.jsx)(o.A,{className:"w-5 h-5 text-green-400"}),"error"===e.status&&(0,a.jsx)(m,{className:"w-5 h-5 text-red-400"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-white font-medium truncate",children:e.file.name}),(0,a.jsxs)("div",{className:"text-sm text-slate-400",children:[(r=e.file.size)<1024?r+" B":r<1048576?(r/1024).toFixed(1)+" KB":(r/1048576).toFixed(1)+" MB",e.message&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",e.message]})]})]}),"pending"===e.status&&!f&&(0,a.jsx)("button",{onClick:()=>{t(e=>e.filter((e,t)=>t!==s))},className:"flex-shrink-0 p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(m,{className:"w-5 h-5"})})]},s)})})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,a.jsxs)("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),"File Processing Info:"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-sm text-slate-300",children:[(0,a.jsx)("li",{children:"• Accepts .txt and .docx files (modern Word format only)"}),(0,a.jsx)("li",{children:"• Legacy .doc files not supported - convert to .docx or .txt first"}),(0,a.jsx)("li",{children:"• PowerPoint files (.ppt, .pptx) will be ignored"}),(0,a.jsx)("li",{children:"• Files are processed one at a time (~2-3 seconds each)"}),(0,a.jsx)("li",{children:"• Duplicate titles will be skipped automatically"}),(0,a.jsxs)("li",{children:["• Recommended filename format: ",(0,a.jsx)("code",{className:"text-green-400",children:"YYYY-MM-DD Sermon Title.txt"})]})]})]})]})})})}}},e=>{e.O(0,[4077,8371,8441,1255,7358],()=>e(e.s=20726)),_N_E=e.O()}]);