(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3703],{18660:(e,s,t)=>{Promise.resolve().then(t.bind(t,78479))},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},27738:(e,s,t)=>{"use strict";async function a(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={...s.headers,...function(){let e="b6d6eb3a47a4f760d86ac26ef70d73d49dbf552f3270e8356f18d8db52874da2";return e||console.error("[Admin API] NEXT_PUBLIC_ADMIN_API_SECRET not configured"),{Authorization:"Bearer ".concat(e)}}()};return fetch(e,{...s,headers:t})}async function r(e,s){return a(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async function l(e,s){return a(e,{method:"POST",body:s})}async function o(e){return a(e,{method:"GET"})}t.d(s,{Cw:()=>o,KQ:()=>l,eM:()=>r})},35626:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},52056:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},78479:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(95155),r=t(12115),l=t(52056),o=t(71847);let n=(0,o.A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),c=(0,o.A)("message-square-off",[["path",{d:"M19 19H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.7.7 0 0 1 2 21.286V5a2 2 0 0 1 1.184-1.826",key:"1wyg69"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.656 3H20a2 2 0 0 1 2 2v11.344",key:"mhl4k6"}]]);var d=t(35626),i=t(20063),x=t(88371),m=t(27738);function p(){let e=(0,i.useRouter)(),[s,t]=(0,r.useState)([]),[o,p]=(0,r.useState)({total:0,abusive:0,spam:0,offTopic:0}),[u,h]=(0,r.useState)(!0),[b,f]=(0,r.useState)("all");(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await (0,m.Cw)("/api/moderation-logs"),s=await e.json();t(s.logs||[]),p(s.stats||{total:0,abusive:0,spam:0,offTopic:0})}catch(e){console.error("Failed to fetch logs:",e)}finally{h(!1)}},j="all"===b?s:s.filter(e=>e.moderation_type===b);return(0,a.jsxs)(x.A,{children:[(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-slate-900/95 backdrop-blur-sm border-b border-slate-800",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin"),className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",children:(0,a.jsx)(d.A,{className:"w-5 h-5 text-slate-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Moderation Logs"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Monitor flagged pastoral guidance questions"})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Total Flagged"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-white",children:o.total})]}),(0,a.jsxs)("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-xs text-red-300 mb-1",children:"Abusive"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-red-400",children:o.abusive})]}),(0,a.jsxs)("div",{className:"bg-orange-900/20 border border-orange-700/50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-xs text-orange-300 mb-1",children:"Spam"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-400",children:o.spam})]}),(0,a.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-xs text-yellow-300 mb-1",children:"Off-Topic"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-yellow-400",children:o.offTopic})]})]}),(0,a.jsx)("div",{className:"flex gap-2 mb-6",children:["all","abusive","spam","off-topic"].map(e=>(0,a.jsxs)("button",{onClick:()=>f(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(b===e?"bg-blue-600 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-800"),children:["all"===e?"All":e.charAt(0).toUpperCase()+e.slice(1),"all"!==e&&" (".concat("abusive"===e?o.abusive:"spam"===e?o.spam:o.offTopic,")")]},e))}),u?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("p",{className:"text-slate-400 mt-4",children:"Loading logs..."})]}):0===j.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-slate-800/30 border border-slate-700 rounded-xl",children:[(0,a.jsx)(c,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"No moderation events found"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-2",children:"This is good news!"})]}):(0,a.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,a.jsxs)("div",{className:"border rounded-xl p-4 ".concat((e=>{switch(e){case"abusive":return"text-red-400 bg-red-900/30 border-red-700/50";case"spam":return"text-orange-400 bg-orange-900/30 border-orange-700/50";case"off-topic":return"text-yellow-400 bg-yellow-900/30 border-yellow-700/50";default:return"text-slate-400 bg-slate-800/30 border-slate-700/50"}})(e.moderation_type)),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"abusive":return(0,a.jsx)(l.A,{className:"w-4 h-4"});case"spam":return(0,a.jsx)(n,{className:"w-4 h-4"});case"off-topic":return(0,a.jsx)(c,{className:"w-4 h-4"});default:return null}})(e.moderation_type),(0,a.jsx)("span",{className:"font-semibold capitalize",children:e.moderation_type.replace("-"," ")})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs opacity-75",children:new Date(e.created_at).toLocaleString()}),(0,a.jsxs)("p",{className:"text-xs opacity-60 mt-1",children:["IP: ",e.user_ip]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold mb-1 opacity-75",children:"Question:"}),(0,a.jsx)("p",{className:"text-sm bg-black/20 rounded p-2",children:e.user_question})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold mb-1 opacity-75",children:"Response Sent:"}),(0,a.jsx)("p",{className:"text-xs bg-black/20 rounded p-2 opacity-90",children:e.response_sent})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-xs opacity-60",children:["User Agent: ",e.user_agent]})})]})]},e.id))})]})]}),");"]})}}},e=>{e.O(0,[4077,8371,8441,1255,7358],()=>e(e.s=18660)),_N_E=e.O()}]);