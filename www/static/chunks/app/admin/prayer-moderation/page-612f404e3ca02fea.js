(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6887],{40550:(e,t,s)=>{"use strict";let r,a,i;s.d(t,{$:()=>c,db:()=>a});var l=s(52078),n=s(19708),d=s(81328),o=s(91446);if(r=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyDg5gmuadL8jX01gX9Ww3oxx-j4mpMDdOY",authDomain:"thebusychristian-app.firebaseapp.com",projectId:"thebusychristian-app",storageBucket:"thebusychristian-app.appspot.com",messagingSenderId:"689195108551",appId:"1:689195108551:web:e90ce2cbf79db3ab5456e2"}),a=(0,n.aU)(r),i=(0,d.xI)(r),(0,d.oM)(i,d.Gt).catch(e=>{console.warn("Failed to set auth persistence:",e)}),"serviceWorker"in navigator)try{(0,o.dG)(r)}catch(e){console.warn("⚠️ Messaging not supported:",e)}async function c(e,t,s,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0,d=n.Dc.fromDate(new Date(Date.now()+6048e5)),o={userId:e,userName:i?"Anonymous":t,request:s,category:r,isAnonymous:i,hearts:[],heartCount:0,createdAt:(0,n.O5)(),expiresAt:d,status:"active",isModerated:!0,flagCount:0};return!i&&l&&(o.userLocation=l),(await (0,n.gS)((0,n.rJ)(a,"prayer_requests"),o)).id}},55235:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h,dynamic:()=>c});var r=s(95155),a=s(12115),i=s(67355),l=s.n(i),n=s(19708),d=s(40550),o=s(88371);let c="force-dynamic";function h(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)("all"),[c,h]=(0,a.useState)(null),[x,m]=(0,a.useState)(""),[p,u]=(0,a.useState)(null),[b,g]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{let e=(0,n.P)((0,n.rJ)(d.db,"prayer_requests"),(0,n.My)("createdAt","desc")),s=(0,n.aQ)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>s()},[]);let w=e.filter(e=>"all"===s||("flagged"===s?e.flagCount>0:"crisis"===s?e.crisisDetected:"hidden"!==s||"hidden"===e.status)),y=async e=>{try{await (0,n.mZ)((0,n.H9)(d.db,"prayer_requests",e),{request:x,needsModeration:!1}),h(null),u(null)}catch(e){console.error("Error updating prayer:",e),alert("❌ Failed to update")}},f=async(e,t)=>{if(confirm('Delete: "'.concat(t.substring(0,50),'..."?')))try{await (0,n.kd)((0,n.H9)(d.db,"prayer_requests",e))}catch(e){console.error("Error deleting prayer:",e),alert("❌ Failed to delete")}},N=async e=>{try{await (0,n.mZ)((0,n.H9)(d.db,"prayer_requests",e),{status:"hidden"})}catch(e){console.error("Error hiding prayer:",e)}},j=async e=>{try{await (0,n.mZ)((0,n.H9)(d.db,"prayer_requests",e),{status:"active"})}catch(e){console.error("Error restoring prayer:",e)}},v=async()=>{if(0!==b.size&&confirm("Delete ".concat(b.size," selected prayer(s)?")))try{await Promise.all(Array.from(b).map(e=>(0,n.kd)((0,n.H9)(d.db,"prayer_requests",e)))),g(new Set)}catch(e){console.error("Error deleting prayers:",e),alert("❌ Failed to delete some prayers")}};return(0,r.jsx)(o.A,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-white",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"".concat(l().className," text-4xl font-bold text-white mb-2"),children:"Prayer Moderation"}),(0,r.jsx)("div",{className:"h-[2px] w-20 bg-gradient-to-r from-yellow-400 to-amber-400"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6 text-sm",children:[(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2",children:[(0,r.jsx)("span",{className:"text-white/60",children:"Total: "}),(0,r.jsx)("span",{className:"font-bold text-yellow-400",children:e.length})]}),(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2",children:[(0,r.jsx)("span",{className:"text-white/60",children:"Flagged: "}),(0,r.jsx)("span",{className:"font-bold text-red-400",children:e.filter(e=>e.flagCount>0).length})]}),(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2",children:[(0,r.jsx)("span",{className:"text-white/60",children:"Crisis: "}),(0,r.jsx)("span",{className:"font-bold text-orange-400",children:e.filter(e=>e.crisisDetected).length})]}),(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2",children:[(0,r.jsx)("span",{className:"text-white/60",children:"Hidden: "}),(0,r.jsx)("span",{className:"font-bold text-white/60",children:e.filter(e=>"hidden"===e.status).length})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6 items-center",children:[["all","flagged","crisis","hidden"].map(e=>(0,r.jsx)("button",{onClick:()=>i(e),className:"rounded-lg px-4 py-2 text-xs font-medium border transition-all capitalize ".concat(s===e?"bg-yellow-400/20 border-yellow-400 text-yellow-400":"border-white/10 bg-white/5 text-white/60 hover:border-white/20"),children:e},e)),b.size>0&&(0,r.jsxs)("button",{onClick:v,className:"ml-auto rounded-lg px-4 py-2 text-xs font-medium bg-red-500/80 text-white border border-red-500 hover:bg-red-600 transition-colors",children:["Delete Selected (",b.size,")"]})]}),(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-3 px-4 py-3 bg-white/5 border-b border-white/10 text-xs font-semibold text-white/80",children:[(0,r.jsxs)("div",{className:"col-span-3 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:b.size===w.length&&w.length>0,onChange:()=>{b.size===w.length?g(new Set):g(new Set(w.map(e=>e.id)))},className:"w-4 h-4 rounded border-white/30 bg-white/10 cursor-pointer"}),(0,r.jsx)("span",{children:"User / Category"})]}),(0,r.jsx)("div",{className:"col-span-5",children:"Prayer Request"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"Status"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"❤️"}),(0,r.jsx)("div",{className:"col-span-2 text-center",children:"Actions"})]}),(0,r.jsx)("div",{className:"divide-y divide-white/10",children:w.map(e=>{let t=p===e.id,s=c===e.id;return(0,r.jsxs)("div",{className:"transition-colors ".concat(e.crisisDetected?"bg-red-400/5":e.flagCount>=3?"bg-orange-400/5":"hidden"===e.status?"bg-white/3":"hover:bg-white/5"),children:[(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-3 px-4 py-3 text-sm items-start",children:[(0,r.jsxs)("div",{className:"col-span-3 flex items-start gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:b.has(e.id),onChange:()=>(e=>{let t=new Set(b);t.has(e)?t.delete(e):t.add(e),g(t)})(e.id),className:"w-4 h-4 rounded border-white/30 bg-white/10 cursor-pointer mt-1"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-medium text-white truncate",children:e.userName}),(0,r.jsx)("div",{className:"text-xs text-white/50",children:e.category})]})]}),(0,r.jsx)("div",{className:"col-span-5",children:(0,r.jsx)("button",{onClick:()=>{var t;u(p===(t=e.id)?null:t)},className:"text-left text-white/70 hover:text-white transition-colors w-full",children:(0,r.jsx)("div",{className:"".concat(t?"":"line-clamp-2"),children:e.request})})}),(0,r.jsxs)("div",{className:"col-span-1 flex flex-col gap-1",children:["hidden"===e.status&&(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-red-400/20 border border-red-400/30 text-red-400 rounded text-center",children:"HIDE"}),e.crisisDetected&&(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-orange-400/20 border border-orange-400/30 text-orange-400 rounded text-center",children:"\uD83C\uDD98"}),e.flagCount>0&&(0,r.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-yellow-400/20 border border-yellow-400/30 text-yellow-400 rounded text-center",children:["\uD83D\uDEA9",e.flagCount]})]}),(0,r.jsx)("div",{className:"col-span-1 text-center text-white/60 text-sm",children:e.heartCount}),(0,r.jsxs)("div",{className:"col-span-2 flex gap-1",children:[(0,r.jsx)("button",{onClick:()=>{h(e.id),m(e.request),u(e.id)},className:"flex-1 px-2 py-1 bg-blue-500/80 text-white rounded text-xs hover:bg-blue-600 transition-colors font-medium",children:"Edit"}),"hidden"===e.status?(0,r.jsx)("button",{onClick:()=>j(e.id),className:"flex-1 px-2 py-1 bg-green-500/80 text-white rounded text-xs hover:bg-green-600 transition-colors font-medium",children:"Show"}):(0,r.jsx)("button",{onClick:()=>N(e.id),className:"flex-1 px-2 py-1 bg-orange-500/80 text-white rounded text-xs hover:bg-orange-600 transition-colors font-medium",children:"Hide"}),(0,r.jsx)("button",{onClick:()=>f(e.id,e.request),className:"flex-1 px-2 py-1 bg-red-500/80 text-white rounded text-xs hover:bg-red-600 transition-colors font-medium",children:"Delete"})]})]}),t&&s&&(0,r.jsxs)("div",{className:"px-4 pb-4 border-t border-white/10 bg-white/5",children:[(0,r.jsx)("textarea",{value:x,onChange:e=>m(e.target.value),className:"w-full bg-white/5 border border-white/10 text-white rounded-lg p-3 mt-3 min-h-32 focus:border-yellow-400 focus:outline-none text-sm"}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)("button",{onClick:()=>y(e.id),className:"px-4 py-1.5 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"✓ Save"}),(0,r.jsx)("button",{onClick:()=>{h(null),u(null)},className:"px-4 py-1.5 bg-white/10 border border-white/20 text-white rounded text-sm hover:bg-white/20",children:"Cancel"})]})]})]},e.id)})})]}),0===w.length&&(0,r.jsx)("div",{className:"text-center py-20 text-white/50 text-sm",children:"No prayers to moderate"})]})})})}},62330:(e,t,s)=>{Promise.resolve().then(s.bind(s,55235))},67355:e=>{e.exports={style:{fontFamily:"'Playfair Display', 'Playfair Display Fallback'",fontStyle:"normal"},className:"__className_8ba1a1"}}},e=>{e.O(0,[793,9135,159,4077,1029,2297,8371,8441,1255,7358],()=>e(e.s=62330)),_N_E=e.O()}]);