(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[767],{20063:(e,r,a)=>{"use strict";var s=a(47260);a.o(s,"useParams")&&a.d(r,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(r,{useSearchParams:function(){return s.useSearchParams}})},59223:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var s=a(95155),t=a(12115),o=a(52619),l=a.n(o),n=a(20063);let c={"bible-in-year":Array.from({length:365},(e,r)=>{let a=r+1;return a<=50?{day:a,passages:["Genesis ".concat(a)]}:a<=90?{day:a,passages:["Exodus ".concat(a-50)]}:a<=120?{day:a,passages:["Matthew ".concat(a-90)]}:a<=180?{day:a,passages:["Psalm ".concat(a-120),"Proverbs ".concat((a-120)%31+1)]}:{day:a,passages:["Acts ".concat(Math.min(28,a-180))]}}),"nt-90-days":Array.from({length:90},(e,r)=>{let a=r+1;return a<=28?{day:a,passages:["Matthew ".concat(a)]}:a<=44?{day:a,passages:["Mark ".concat(a-28)]}:a<=68?{day:a,passages:["Luke ".concat(a-44)]}:a<=89?{day:a,passages:["John ".concat(a-68)]}:{day:a,passages:["Acts ".concat(a-89)]}}),"gospels-30-days":Array.from({length:30},(e,r)=>({day:r+1,passages:["Matthew ".concat(r+1)]})),"psalms-proverbs":Array.from({length:31},(e,r)=>{let a=r+1;return{day:a,passages:["Psalm ".concat(a),"Psalm ".concat(a+31),"Psalm ".concat(a+62),"Psalm ".concat(a+93),"Psalm ".concat(a+124),"Proverbs ".concat(a)]}}),"pauls-letters":Array.from({length:30},(e,r)=>{let a=r+1;return a<=16?{day:a,passages:["Romans ".concat(a)]}:a<=22?{day:a,passages:["1 Corinthians ".concat((a-16)*2),"1 Corinthians ".concat((a-16)*2+1)]}:a<=28?{day:a,passages:["Galatians ".concat(a-22)]}:{day:a,passages:["Ephesians ".concat(a-28)]}})};function d(e){let{passage:r}=e,[a,o]=(0,t.useState)(!1),[l,n]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[i,u]=(0,t.useState)(!1),m=(0,t.useRef)(null),p=async()=>{o(!0),n(null);try{let e=await fetch("/api/esv-audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({passage:r})});if(!e.ok)throw Error("Failed to load audio");let a=await e.blob(),s=URL.createObjectURL(a);d(s),setTimeout(()=>{var e;return null==(e=m.current)?void 0:e.play().catch(()=>n("Click play to listen."))},150)}catch(e){n("Could not load audio. Please try again.")}o(!1)};return(0,s.jsxs)("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--card-border)"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5",style:{color:"var(--accent-color)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),(0,s.jsxs)("h4",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:["Listen: ",r]}),i&&(0,s.jsx)("span",{className:"text-xs",style:{color:"rgb(74, 222, 128)"},children:"▶ Playing"})]}),!c&&!a&&(0,s.jsx)("button",{onClick:p,className:"w-full rounded-lg px-3 py-2 transition text-sm font-medium flex items-center justify-center gap-2",style:{borderWidth:"1px",borderStyle:"solid",borderColor:"color-mix(in srgb, var(--accent-color) 30%, transparent)",backgroundColor:"color-mix(in srgb, var(--accent-color) 10%, transparent)",color:"var(--accent-color)"},children:"▶ Play Audio"}),a&&(0,s.jsxs)("div",{className:"flex justify-center items-center py-3 gap-2",children:[(0,s.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-t-transparent rounded-full",style:{borderColor:"var(--accent-color)",borderTopColor:"transparent"}}),(0,s.jsx)("span",{className:"text-sm",style:{color:"var(--accent-color)"},children:"Loading audio..."})]}),l&&(0,s.jsx)("div",{className:"text-sm",style:{color:"rgb(248, 113, 113)"},children:l}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("audio",{ref:m,src:c,controls:!0,className:"w-full"}),(0,s.jsx)("p",{className:"text-xs mt-2 italic",style:{color:"var(--text-secondary)"},children:"ESV Audio Bible"})]})]})}function i(){var e,r,a;let o=(0,n.useSearchParams)().get("plan"),[i,u]=(0,t.useState)(null),[m,p]=(0,t.useState)(!0),[x,g]=(0,t.useState)([]),[y,h]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(o){let e=localStorage.getItem("reading-plan-".concat(o));if(e){let r=JSON.parse(e);u(r);let a=c[o],s=null==a?void 0:a.find(e=>e.day===r.currentDay);s&&b(s.passages)}}p(!1)},[o]),e=(null==i?void 0:i.title)||"My Plan",r=(null==i?void 0:i.currentDay)||1,a=(null==i?void 0:i.duration)||1,(0,t.useEffect)(()=>{if(!o)return;let s={planId:o,planTitle:e,currentDay:r,totalDays:a,lastRead:new Date().toISOString()};localStorage.setItem("bc-reading-progress",JSON.stringify(s))},[o,e,r,a]);let b=async e=>{h(!0);try{let r=await Promise.all(e.map(async e=>{let r=await fetch("/api/esv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({passage:e})}),a=await r.json();return{ref:e,text:a.text||"Passage not found."}}));g(r)}catch(e){console.error("Error fetching passages:",e)}h(!1)};if(m)return(0,s.jsx)("main",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-color)"},children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto animate-pulse rounded-lg p-6 h-64",style:{backgroundColor:"var(--card-bg)"}})});if(!o||!i)return(0,s.jsx)("main",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-color)"},children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4",style:{color:"var(--text-primary)"},children:"Start a Reading Plan"}),(0,s.jsx)("p",{className:"mb-6",style:{color:"var(--text-secondary)"},children:"Choose a plan to begin your journey through Scripture."}),(0,s.jsx)(l(),{href:"/reading-plans",className:"font-semibold",style:{color:"var(--accent-color)"},children:"Browse Plans →"})]})});let f=Math.round(i.currentDay/i.duration*100),v=i.duration-i.currentDay;return(0,s.jsx)("main",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-color)"},children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)(l(),{href:"/reading-plans",className:"text-sm mb-4 inline-flex items-center gap-1",style:{color:"var(--accent-color)"},children:"← Back to Plans"}),(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",style:{color:"var(--text-primary)"},children:i.title}),(0,s.jsxs)("p",{style:{color:"var(--text-secondary)"},children:["Day ",i.currentDay," of ",i.duration]}),(0,s.jsxs)("div",{className:"rounded-lg p-6 my-6",style:{backgroundColor:"var(--card-bg)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--card-border)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Progress"}),(0,s.jsxs)("span",{className:"font-bold",style:{color:"var(--accent-color)"},children:[f,"%"]})]}),(0,s.jsx)("div",{className:"w-full rounded-full h-3",style:{backgroundColor:"var(--card-border)"},children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:"".concat(f,"%"),backgroundColor:"var(--accent-color)"}})}),(0,s.jsx)("p",{className:"mt-3 text-sm",style:{color:"var(--text-secondary)"},children:v>0?"\uD83D\uDD25 ".concat(v," days remaining"):"\uD83C\uDF89 Completed!"})]}),y?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-t-transparent rounded-full",style:{borderColor:"var(--accent-color)",borderTopColor:"transparent"}})}):x.map((e,r)=>(0,s.jsxs)("div",{className:"rounded-lg p-6 mb-6",style:{backgroundColor:"var(--card-bg)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--card-border)"},children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--accent-color)"},children:e.ref}),(0,s.jsx)(d,{passage:e.ref}),(0,s.jsx)("div",{className:"leading-relaxed whitespace-pre-wrap font-serif text-lg mt-4",style:{color:"var(--text-primary)",opacity:.9},children:e.text}),(0,s.jsx)(l(),{href:"/deep-study?passage=".concat(encodeURIComponent(e.ref)),className:"inline-flex items-center gap-2 text-sm mt-4",style:{color:"var(--accent-color)"},children:"Study in depth →"})]},r)),!i.completed&&(0,s.jsxs)("button",{onClick:()=>{if(!i||!o)return;let e=i.currentDay+1,r={...i,currentDay:Math.min(e,i.duration),completed:e>=i.duration};if(u(r),localStorage.setItem("reading-plan-".concat(o),JSON.stringify(r)),localStorage.setItem("bc-reading-progress",JSON.stringify(r)),!r.completed){var a;let e=null==(a=c[o])?void 0:a.find(e=>e.day===r.currentDay);e&&b(e.passages)}},className:"w-full rounded-xl px-4 py-4 font-semibold transition-colors text-lg",style:{borderWidth:"1px",borderStyle:"solid",borderColor:"rgba(74, 222, 128, 0.3)",backgroundColor:"rgba(74, 222, 128, 0.1)",color:"rgb(74, 222, 128)"},children:["✓ Mark Day ",i.currentDay," Complete"]}),i.completed&&(0,s.jsxs)("div",{className:"rounded-lg p-6 text-center mt-6",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgba(34, 197, 94, 0.2)"},children:[(0,s.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDF89"}),(0,s.jsx)("p",{className:"font-bold text-lg",style:{color:"rgb(74, 222, 128)"},children:"Congratulations!"}),(0,s.jsxs)("p",{style:{color:"var(--text-secondary)"},children:["You've completed ",i.title,"!"]})]})]})})}function u(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-color)"},children:(0,s.jsx)("div",{className:"animate-pulse rounded-lg h-64",style:{backgroundColor:"var(--card-bg)"}})}),children:(0,s.jsx)(i,{})})}},94210:(e,r,a)=>{Promise.resolve().then(a.bind(a,59223))}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=94210)),_N_E=e.O()}]);